<!DOCTYPE HTML>
<html lang="fr">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<title>Auberge de Peillon</title>
	<link rel="stylesheet" type="text/css" href="./style/SiteHotel.css">
</head>
<body>
	<nav>
		<ul>
			<li><a href="index.html">Accueil</a></li>
			<li><a href="chambres.html">Nos chambres</a></li>
			<li><a href="velo.html">Nos vélos</a></li>
			<li><a href="reservations.html">Réserver</a></li>
			<li><a href="contact.html">Nous retrouver</a></li>
            <li><a href="login.html" class="navConnexion"> Connexion </a></li>
		</ul>
	</nav>	
    <form>
        <fieldset>
            <legend>Inscription</legend>
            <label for="login">Login</label>
            <input type="email" name="login" id="idusers" required>
            <label for="password">Mot de passe</label>
            <input type="password" name="password" id="password" required>
            <label for="password"> Confirmer le mot de passe</label>
            <input type="password" name="passwordValidate" id="passwordValidate" required>
            <input type="button" value="Envoyer" class="envoyers" onclick="inscription(this.form)">
            <a href="inscription.html">S'inscrire</a>
        </fieldset>
    </form>
	<nav>
		<ul>
			<li><a href="legal.html">Mentions légales</a></li>
			<li><a href="confidentialite.html">Politique de confidentialité</a></li>
		</ul>
	</nav>
</body>
<script>
  function inscription (form) {
  var idusers = form.idusers.value;
  var password = form.password.value;
  var passwordValidate = form.passwordValidate.value;
  console.log(idusers);
  console.log(password);
  console.log (passwordValidate);
    if (password != passwordValidate) {
        alert("Les mots de passe ne correspondent pas");
        return;
    }
    else{
        fetch("http://localhost:8000/user/signup", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({"idusers": idusers, "password": password}),
    }).then((response) => response.text())
        .then((responseText) => {
            alert(responseText);
        })
        .catch((error) => {
            console.error("foo: " + error)
        })
        window.location.href = "login.html";
    }
}

</script>
</html>